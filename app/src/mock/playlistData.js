export const mockPlaylists = [
    {
        id: 1,
        name: "华语流行经典",
        coverImgUrl: "https://p2.music.126.net/6y-UleORITEDb6GsvlI8KA==/109951163080354397.jpg",
        playCount: 12560000,
        trackCount: 120,
        description: "收录华语乐坛经典流行歌曲，陪伴你度过每一个难忘的时刻",
        tags: ["华语", "流行", "经典"],
        creator: {
            nickname: "音乐达人",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 30
    },
    {
        id: 2,
        name: "欧美金曲精选",
        coverImgUrl: "https://p2.music.126.net/BPl8sC4rO-9Xn0B95FN9lQ==/109951163727918833.jpg",
        playCount: 8930000,
        trackCount: 85,
        description: "精选欧美流行金曲，感受国际乐坛的魅力",
        tags: ["欧美", "流行", "英语"],
        creator: {
            nickname: "欧美音乐控",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 15
    },
    {
        id: 3,
        name: "治愈系轻音乐",
        coverImgUrl: "https://p2.music.126.net/sOiuFkSyPLjQj7N1n8X5hw==/109951164111014989.jpg",
        playCount: 5670000,
        trackCount: 60,
        description: "轻柔的音乐，治愈你的心灵，适合学习、工作、放松",
        tags: ["轻音乐", "治愈", "安静"],
        creator: {
            nickname: "静心时光",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 60
    },
    {
        id: 4,
        name: "电子电音狂欢节",
        coverImgUrl: "https://p2.music.126.net/rCs2f5j5sFg9jKQv2sFfnQ==/109951164579956993.jpg",
        playCount: 15200000,
        trackCount: 100,
        description: "最燃的电音狂欢，让你沉浸在动感节奏中",
        tags: ["电子", "电音", "舞曲"],
        creator: {
            nickname: "电音小王子",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 5
    },
    {
        id: 5,
        name: "怀旧老歌回忆",
        coverImgUrl: "https://p2.music.126.net/9XO5UxJZ3qK5G1zY3H2K3g==/109951163699257667.jpg",
        playCount: 6890000,
        trackCount: 150,
        description: "重温经典老歌，唤起美好回忆",
        tags: ["怀旧", "经典", "华语"],
        creator: {
            nickname: "怀旧时光机",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 90
    },
    {
        id: 6,
        name: "R&B灵魂节奏",
        coverImgUrl: "https://p2.music.126.net/7K5M7Xr5q3K5p3N2M1K5qQ==/109951163456789012.jpg",
        playCount: 7560000,
        trackCount: 95,
        description: "精选R&B灵魂音乐，感受节奏与情感的碰撞",
        tags: ["R&B", "灵魂", "节奏"],
        creator: {
            nickname: "灵魂歌者",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 20
    },
    {
        id: 7,
        name: "摇滚精神不死",
        coverImgUrl: "https://p2.music.126.net/5K5p3N2M1K5qQ7K5M7Xr5Q==/109951163890123456.jpg",
        playCount: 9230000,
        trackCount: 110,
        description: "传承摇滚精神，释放内心激情",
        tags: ["摇滚", "激情", "经典"],
        creator: {
            nickname: "摇滚老炮",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 45
    },
    {
        id: 8,
        name: "爵士慵懒时光",
        coverImgUrl: "https://p2.music.126.net/2M1K5qQ7K5M7Xr5q3N2M1Q==/109951164234567890.jpg",
        playCount: 4560000,
        trackCount: 75,
        description: "慵懒的爵士音乐，享受悠闲时光",
        tags: ["爵士", "慵懒", "蓝调"],
        creator: {
            nickname: "爵士爱好者",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 10
    },
    {
        id: 9,
        name: "古风雅韵",
        coverImgUrl: "https://p2.music.126.net/3N2M1K5qQ7K5M7Xr5q3K5g==/109951164789012345.jpg",
        playCount: 11890000,
        trackCount: 130,
        description: "古风音乐精选，感受中国风之美",
        tags: ["古风", "国风", "古典"],
        creator: {
            nickname: "古风墨客",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 25
    },
    {
        id: 10,
        name: "运动健身BGM",
        coverImgUrl: "https://p2.music.126.net/1K5qQ7K5M7Xr5q3N2M1K5Q==/109951164456123789.jpg",
        playCount: 8900000,
        trackCount: 80,
        description: "运动健身必备背景音乐，让你更有动力",
        tags: ["运动", "健身", "励志"],
        creator: {
            nickname: "健身达人",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 8
    },
    {
        id: 11,
        name: "睡前催眠曲",
        coverImgUrl: "https://p2.music.126.net/Xr5q3N2M1K5qQ7K5M7Xr5g==/109951163678901234.jpg",
        playCount: 7650000,
        trackCount: 50,
        description: "轻柔的催眠曲，助你安然入睡",
        tags: ["睡前", "催眠", "安静"],
        creator: {
            nickname: "睡眠大师",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 35
    },
    {
        id: 12,
        name: "日韩流行风向标",
        coverImgUrl: "https://p2.music.126.net/5q3N2M1K5qQ7K5M7Xr5q3g==/109951164890123456.jpg",
        playCount: 10340000,
        trackCount: 90,
        description: "日韩流行音乐精选，紧跟亚洲音乐潮流",
        tags: ["日语", "韩语", "流行"],
        creator: {
            nickname: "日韩音乐迷",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 12
    },
    {
        id: 13,
        name: "民谣在路上",
        coverImgUrl: "https://p2.music.126.net/N2M1K5qQ7K5M7Xr5q3N2Mg==/109951163567890123.jpg",
        playCount: 6780000,
        trackCount: 70,
        description: "民谣歌曲精选，用吉他诉说故事",
        tags: ["民谣", "吉他", "校园"],
        creator: {
            nickname: "民谣诗人",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 50
    },
    {
        id: 14,
        name: "电影原声大赏",
        coverImgUrl: "https://p2.music.126.net/M1K5qQ7K5M7Xr5q3N2M1Kg==/109951164123456789.jpg",
        playCount: 9870000,
        trackCount: 120,
        description: "经典电影原声音乐，重温银幕感动",
        tags: ["影视", "原声", "经典"],
        creator: {
            nickname: "电影迷",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 40
    },
    {
        id: 15,
        name: "嘻哈街头范",
        coverImgUrl: "https://p2.music.126.net/K5qQ7K5M7Xr5q3N2M1K5gQ==/109951164678901234.jpg",
        playCount: 12560000,
        trackCount: 100,
        description: "嘻哈说唱精选，展现街头文化",
        tags: ["嘻哈", "说唱", "街头"],
        creator: {
            nickname: "说唱达人",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 18
    },
    {
        id: 16,
        name: "古典音乐殿堂",
        coverImgUrl: "https://p2.music.126.net/7K5M7Xr5q3N2M1K5qQ7K5g==/109951163890123456.jpg",
        playCount: 4560000,
        trackCount: 80,
        description: "古典音乐精选，感受大师风采",
        tags: ["古典", "钢琴", "交响"],
        creator: {
            nickname: "古典乐迷",
            avatarUrl: "https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg"
        },
        createTime: Date.now() - 86400000 * 70
    }
]

export function getPlaylistsByStyle(styleTags) {
    if (!styleTags || styleTags.length === 0) {
        return mockPlaylists
    }
    return mockPlaylists.filter(playlist =>
        playlist.tags.some(tag => styleTags.includes(tag))
    )
}

export function getPlaylistsByHot() {
    return [...mockPlaylists].sort((a, b) => b.playCount - a.playCount)
}

export function getPlaylistsByLatest() {
    return [...mockPlaylists].sort((a, b) => b.createTime - a.createTime)
}

export function getSimilarStylePlaylists() {
    const historyTags = getHistoryTags()
    return getPlaylistsByStyle(historyTags)
}

function getHistoryTags() {
    const history = JSON.parse(localStorage.getItem('play_history') || '[]')
    const tagMap = {}
    history.forEach(song => {
        if (song.tags) {
            song.tags.forEach(tag => {
                tagMap[tag] = (tagMap[tag] || 0) + 1
            })
        }
    })
    const sortedTags = Object.entries(tagMap)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 5)
        .map(item => item[0])
    
    if (sortedTags.length === 0) {
        return ["流行", "经典", "华语"]
    }
    return sortedTags
}
